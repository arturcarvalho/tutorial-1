# Hammer Tutorial

Welcome to Hammer! If you haven't yet, check out the [Hammer README](https://github.com/hammerframework/hammer/blob/master/README.md) to get a little background on why we created Hammer and the problems it's meant to solve. Hammer brings several existing technologies together for the first time into what we think is the future of single page applications.

In this tutorial we're going to build a blog engine. In reality a blog is probably not the ideal candidate for a Hammer app: blog articles can be stored in a CMS and statically generated to HTML files and served as flat files from a CDN. But as most developers are familiar with a blog and it uses all of the features we want to demonstrate, we decided to build one anyway.

## Prerequisites

This tutorial assumes you are already familiar with a few core concepts:

- [React](https://reactjs.org/)
- [GraphQL](https://graphql.org/)
- [The JAMstack](https://jamstack.org/)

You could work through this tutorial without knowing anything about these technologies but you may find yourself getting lost in terminology that we don't stop and take the time to explain. It also helps knowing where the line is between what is built into React and what additional features Hammer brings to the table.

## Installation & Starting Development

We have a set of command line tools that aids in creating various parts of your Hammer app. Install with either `node` or `yarn` (the rest of this guide assumes Yarn):

    yarn global add @hammerframework/hammer-cli

Note that we install `hammer-cli` globally so that we can create apps from scratch rather than creating a directory and adding it to just that project. Now you can use the Hammer command line tools everywhere. Let's use it right now to create the basic structure of our app:

    hammer new hammerblog

After some commands fly by you'll have a new directory `hammerblog` containing several directories and files. Change to that directory and let's start the development server:

    cd hammerblog
    hammer dev

Your browser should open to http://localhost:8910 show the Hammer welcome page:

[screenshot]

We've already initialized a git repo for you so you may want to save the current state of the app as your first commit.

    git add .
    git commit -am 'First commit'

## Hammer File Structure

Let's take a look at the files and directories that were created for us (config files have been excluded for now):

<img src="https://user-images.githubusercontent.com/300/70482979-05a2d800-1a9c-11ea-9a38-b3ead0f3b5f1.png" alt="hammerblog directory structure" style="width: 300px">

At the top level we have two directories, `api` and `web`. Hammer separates the backend (`api`) and frontend (`web`) concerns into their own paths in the codebase. Yarn refers to these as "workspaces". When you add packages going forward you'll need to specify which workspace they should go in. For example (don't run these commands, we're just looking at the syntax):

    yarn workspace web add marked
    yarn workspace api add better-fs

Within `api` there are two directories:

- `prisma` will contain our database schema (`schema.prisma`) and migrations (files that track the structure of our database changing over time). If your app doesn't need access to a SQL-like database then you can delete this directory completely and even remove the `prisma2` package.
- `src` contains all other backend code. `api/src` contains three more directories:
  - `functions` will contain any lambda functions your app needs in addition to the `graphql.js` file auto-generated by Hammer. This file is required to use the GraphQL API. If you don't need GraphQL you can remove this function completely (and remove the `apollo` package).
  - `graphql` contains SDL files which define your GraphQL schema and types
  - `services` contain GraphQL resolvers and other business logic

That's it for the backend. Let's take a look at the frontend `web` directory:

- `components` contain your traditional React components as well as Hammer "cells".
- `layouts` contain HTML/components that wrap your content and are shared across pages.
- `pages` contain components and are optionally wrapped inside layouts and are the "landing page" for a given URL (a URL like `/articles/hello-world` will map to one page and `/contact-us` will map to another page)
- `index.html` is the standard React starting point for our app.
- `index.js` contains the bootstraping code to get our Hammer app up and running.
- `Routes.js` contains the route definitions for our app

## Our First Page and Route

Let's give our users something to look at besides the Hammer welcome page. We'll use the `hammer` command line tool to create a page for us:

    hammer page home /

This will do two things:

- create `/web/src/pages/home.js`
- add a `<Route>` in `/web/Routes.js` that maps the path `/` to the new _Home_ page

In fact this page is already live. If you reload your browser you should see this new page instead of the Hammer welcome page:

![image](https://user-images.githubusercontent.com/300/70484154-d1c9b180-1a9f-11ea-967e-f3af142a5ba4.png)

It's not pretty, but it's a start! Open the page in your editor, change some text and save. Your browser should reload with your new text. Open up `/web/src/Routes.js` and take a look at the route that was created:

    <Route path="/" page="home">

Try changing the route to something like:

    <Route path="/hello" page="home">

When the browser reloads you should see the Hammer welcome page again. That's because we abandoned the root URL so Hammer takes over and shows the splash screen. Change your URL to `http://localhost:8910/hello" and you should see our page again.
